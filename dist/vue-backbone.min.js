/*!
 * Vue-Backbone v0.1.0
 * https://github.com/mikeapr4/vue-backbone
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.VueBackbone=t():e.VueBackbone=t()}(this,function(){return function(n){var o={};function r(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=n,r.c=o,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.map(function(e){return e._vuebackbone_proxy});for(var o in e)if("function"==typeof e[o]&&"constructor"!==o&&(t||-1===i.indexOf(o))){var r=e[o].bind(e);t||(r=u(r,o)),Object.defineProperty(n,o,{value:r})}return Object.defineProperty(n,"_vuebackbone_original",{value:e}),n};var i=["slice","forEach","map","reduce","reduceRight","find","filter","every","some","indexOf","lastIndexOf","findIndex"],o=["pop","shift","remove","get","at","where","findWhere","reject","sortBy","shuffle","toArray","detect","select","first","head","take","rest","tail","drop","initial","last","without"];function u(t,e){return-1<o.indexOf(e)?function(){var e=t.apply(this,arguments);return e&&(e._vuebackbone_proxy||e.map(function(e){return e._vuebackbone_proxy}))||e}:t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(c,f){var b={};for(var e in c)if("function"==typeof c[e]&&"constructor"!==e){var t=c[e].bind(c);Object.defineProperty(b,e,{value:t})}return Object.keys(c.attributes).forEach(function(e){var t,n,o,r,i,u,a;t=b,o=e,r=f,i=(n=c).get.bind(n,o),u=n.set.bind(n,o),a=t[o]?r+o:o,Object.defineProperty(t,a,{enumerable:!0,get:i,set:u})}),b.id||Object.defineProperty(b,"id",{get:function(){return c.id}}),Object.defineProperty(b,"_vuebackbone_original",{value:c}),b}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapBBModels=f,t.install=s,t.original=p;var o=i(n(1)),r=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}var h={proxies:!0,conflictPrefix:"$",addComputed:!0,dataPrefix:"_",simpleCollectionProxy:!1};function x(e){h.proxies&&!e._vuebackbone_proxy&&(e.models?(e.each(x),e._vuebackbone_proxy=(0,r.default)(e,h.simpleCollectionProxy)):e._vuebackbone_proxy=(0,o.default)(e,h.conflictPrefix))}function u(e){return e.attributes}function b(e){return e.map(u)}function k(e){return e.models?b(e):u(e)}function m(e){return h.addComputed&&h.proxies?h.dataPrefix+e:e}function g(e,t){var n,o,r,i,u,a,c=e._vuebackbone[t],f=c.bb;f.models?(r=e,i=t,u=c,a=f,h.proxies&&(a.on("add",x),u.onreset=function(){return a.each(x)},a.on("reset",u.onreset)),u.onchange=function(){if(r.$data[m(i)]=b(a),h.proxies){var n=a._vuebackbone_proxy;n.length=0,a.forEach(function(e,t){return n[t]=e._vuebackbone_proxy})}},a.on("reset sort remove add",u.onchange)):(o=f,(n=c).onchange=function(){o.keys().length>Object.keys(o._previousAttributes).length&&console.warn("VueBackbone: Adding new Model attributes after binding is not supported, provide defaults for all properties")},o.on("change",n.onchange))}function O(e,t){var n=e._vuebackbone[t];n&&(n.bb.off(null,n.onchange),n.onreset&&n.bb.off(null,n.onreset))}function a(e,t,n,o){var r,i,u,a,c,f,b,s,p,d,l,v,y,_;e._vuebackbone[t]={bb:n},x(n),o||(l=t,v=(d=e).$options.data,y=k(d._vuebackbone[l].bb),_=m(l),d.$options.data=function(){var t={},n=v?v():{};if(n.hasOwnProperty(l))throw"VueBackbone: Property '"+l+"' mustn't exist within the Vue data already";if(n.hasOwnProperty(_))throw"VueBackbone: Property '"+_+"' mustn't exist within the Vue data already";return Object.keys(n).forEach(function(e){return t[e]=n[e]}),t[_]=y,t},h.addComputed&&h.proxies?(f=t,b=(c=e)._vuebackbone[f],s=m(f),(p=c.$options).computed=p.computed||{},p.computed[f]?console.warn("VueBackbone: Generated computed function '"+f+"' already exists within the Vue computed functions"):p.computed[f]={get:function(){return c.$data[s],b.bb._vuebackbone_proxy},set:function(e){O(c,f),x(e),b.bb=e,c.$data[s]=k(e),g(c,f)}}):(i=t,u=(r=e)._vuebackbone[i],a=m(i),r.$bb=r.$bb||{},Object.defineProperty(r.$bb,i,{get:function(){return r.$data[a],u.bb},set:function(e){O(r,i),u.bb=e,r.$data[a]=k(e),g(r,i)}}))),g(e,t)}var c={beforeCreate:function(){var o=this,r=o.$options.bb;if(r){if("function"!=typeof r)throw"VueBackbone: 'bb' initialization option must be a function";r=r(),o._vuebackbone={},Object.keys(r).forEach(function(e){var t=r[e],n=!1;if(!0===t.prop){if(!o.$options.propsData||!o.$options.propsData[e])throw"VueBackbone: Missing Backbone object in Vue prop '"+e+"'";t=o.$options.propsData[e],n=!0}if(!(t=t._vuebackbone_original||t).on||!t.attributes&&!t.models)throw"VueBackbone: Unrecognized Backbone object in Vue instantiation ("+e+"), must be a Collection or Model";a(o,e,t,n)})}},destroyed:function(){var t=this,e=t._vuebackbone;e&&Object.keys(e).forEach(function(e){return O(t,e)})}};function f(t){return h.proxies?function(){var e=t.apply(this,arguments);return e&&(e._vuebackbone_proxy||e.map(function(e){return e._vuebackbone_proxy}))||e}:function(){var e=t.apply(this,arguments);return e&&(e.attributes||e.map(function(e){return e.attributes}))||e}}function s(e,t){for(var n in t)t.hasOwnProperty(n)&&(h[n]=t[n]);e.mixin(c)}function p(e){return e._vuebackbone_original||e}t.default={install:s,mapBBModels:f,original:p}}])});